event_server


事件处理流程:
1. 从事件队列里pop一个消息
2. 根据订阅组装推送消息,放至推送队列

推送流程:
1. 从DB中取订阅者, 从redis取订阅处理者
    1.1 有剩余
        1.1.1 setnx deal
        1.1.2 成功则启动推送, 失败则下一个
    1.2 无剩余
        1.2.1 算出平均数
        1.2.2 找出大于平均数的进程, setnx stop成功后, 重复setnx deal
        1.2.3 setnx deal 成功后启动推送
        1.2.4
2.
